jQuery(document).ready(function(e){function t(e,t,i){var n=p(e.eventsWrapper),a=Number(e.timelineWrapper.css("width").replace("px",""));"next"==i?l(e,n-a+timelineMinDistance,a-t):l(e,n+a-timelineMinDistance)}function n(e,t,i){var n=e.timelineContent.find(".selected");if(("next"==i?n.next():n.prev()).length>0){var a=e.eventsWrapper.find(".selected"),l="next"==i?a.parent("li").next("li").children("a"):a.parent("li").prev("li").children("a");s(l,e.fillingLine,t),m(e,l),l.addClass("selected"),a.removeClass("selected"),f(l),r(i,l,e)}}function a(e){var t=e.timelineContent.find(".selected").index(),i=e.timelineContent.find("li").length-1;e.timelineNextPrev.find(".prev").removeClass("inactive"),e.timelineNextPrev.find(".next").removeClass("inactive"),0==t?e.timelineNextPrev.find(".prev").addClass("inactive"):t==i&&e.timelineNextPrev.find(".next").addClass("inactive")}function r(e,t,i){var n=window.getComputedStyle(t.get(0),null),a=Math.ceil(Number(n.getPropertyValue("left").replace("px",""))),r=Math.ceil(Number(i.timelineWrapper.width())),s=Math.ceil(Number(i.eventsWrapper.width())),o=Math.ceil(p(i.eventsWrapper));("next"==e&&a>r-o||"prev"==e&&a<-o)&&l(i,r/2-a,r-s)}function l(e,t,i){var n=e.eventsWrapper.get(0);t=t>0?0:t,c(n,"translateX",(t=void 0!==i&&t<i?i:t)+"px"),0==t?e.timelineNavigation.find(".prev").addClass("inactive"):e.timelineNavigation.find(".prev").removeClass("inactive"),t==i?e.timelineNavigation.find(".next").addClass("inactive"):e.timelineNavigation.find(".next").removeClass("inactive")}function s(e,t,i){var n=window.getComputedStyle(e.get(0),null),a=n.getPropertyValue("left"),r=n.getPropertyValue("width"),l=(a=Number(a.replace("px",""))+Number(r.replace("px",""))/2)/i;c(t.get(0),"scaleX",l)}function o(e,t,n,a,l,o,m,d){var u=e.timelineWrapper.width(),f=0,p=0,c=0,v=0;if(e.eventsWrapper.css("width","auto"),a>u&&(a=u-2*n),a<0&&(a=n),m){for(i=0;i<e.timelineDates.length;i++)c=v+n,e.timelineEvents.eq(i).css("left",c+"px"),v=c;t=c}else{for(i=0;i<e.timelineDates.length;i++)f=0==i?0:h(e.timelineDates[i-1],e.timelineDates[i],d,"minutes",!1),(p=Math.ceil(f/e.timelineSmallest*n))>a?p=a:p<n&&(p=n),c=0==i?v+l:v+p,e.timelineEvents.eq(i).css("left",c+"px"),v=c;t=c}return(t+=o)<u&&(t=u),e.eventsWrapper.css("width",t+"px"),s(e.eventsWrapper.find("a.selected"),e.fillingLine,t),r("next",e.eventsWrapper.find("a.selected"),e),t}function m(e,t){var i=t.attr("data-timestamp"),n=e.timelineContent.find(".selected"),r=e.timelineContent.find('[data-timestamp="'+i+'"]'),l=r.outerHeight();if(r.index()>n.index())var s="ts-horizontal-timeline-single selected enter-right",o="ts-horizontal-timeline-single leave-left";else var s="ts-horizontal-timeline-single selected enter-left",o="ts-horizontal-timeline-single leave-right";r.attr("class",s),n.attr("class",o).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){n.removeClass("leave-right leave-left"),r.removeClass("enter-left enter-right")}),e.timelineContent.css("height",l+"px"),a(e),u(e)}function d(e){var t=e.timelineContent.find(".selected").outerHeight();e.timelineContent.css("height",t+"px")}function u(e){timelineWrapperWidth=e.timelineItems.width(),timelineColumnsStack=parseInt(e.timelineItems.attr("data-columnsstack")),e.timelineItems.children("li.ts-horizontal-timeline-single").each(function(e){"true"==jQuery(this).attr("data-columns")&&(timelineWrapperWidth<=timelineColumnsStack?jQuery(this).removeClass("ts-horizontal-timeline-columns"):jQuery(this).addClass("ts-horizontal-timeline-columns"))})}function f(e){e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function p(e){var t=window.getComputedStyle(e.get(0),null),i=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(i.indexOf("(")>=0)n=(i=(i=(i=i.split("(")[1]).split(")")[0]).split(","))[4];else var n=0;return Number(n)}function c(e,t,i){e.style["-webkit-transform"]=t+"("+i+")",e.style["-moz-transform"]=t+"("+i+")",e.style["-ms-transform"]=t+"("+i+")",e.style["-o-transform"]=t+"("+i+")",e.style.transform=t+"("+i+")"}function v(e){var t=[];return e.each(function(){var e=jQuery(this).attr("data-timestamp");t.push(e)}),t}function h(e,t,i,n,a){var r,l,s,o,m;return m=t-e,a?(o=Math.floor(m/1e3),s=Math.floor(o/60),o%=60,l=Math.floor(s/60),s%=60,r=Math.floor(l/24),l%=24):(o=Math.floor(m/1e3),s=Math.floor(o/60),l=Math.floor(s/60),r=Math.floor(l/24)),"days"==n?Math.abs(r):"hours"==n?Math.abs(l):"minutes"==n?Math.abs(s):"seconds"==n?Math.abs(o):"millis"==n?Math.abs(m):"all"==n?{days:Math.abs(r),hours:Math.abs(l),minutes:Math.abs(s),seconds:Math.abs(o),millis:Math.abs(m)}:void 0}function g(e,t){var n=[];for(i=1;i<e.length;i++){var a=h(e[i-1],e[i],t,"minutes",!1);n.push(a)}return Math.min.apply(null,n)}function C(e){for(var t=e.offsetTop,i=e.offsetLeft,n=e.offsetWidth,a=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,i+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+a>window.pageYOffset&&i+n>window.pageXOffset}var y=jQuery(".ts-horizontal-timeline-main");y.length>0&&function(e){e.each(function(){var e=jQuery(this),i={};if(timelineDirection=e.attr("data-direction"),timelineStartEvent=parseInt(e.attr("data-startevent")),timelineMinDistance=parseInt(e.attr("data-minspace")),timelineMaxDistance=parseInt(e.attr("data-maxspace")),timelineLeftDistance=parseInt(e.attr("data-leftspace")),timelineRightDistance=parseInt(e.attr("data-rightspace")),timelineColumnsStack=parseInt(e.attr("data-columnsstack")),timelineIndexLooper=0,timelineTotalWidth=0,timelineConvertUNIX=0,timelineConvertMoment="",timelineEqualizer="true"==e.attr("data-equalizer"),timelineReverse="true"==e.attr("data-reverse"),timelineKeyboard="true"==e.attr("data-keyboard"),i.timelineWrapper=e.find(".ts-horizontal-timeline-wrapper"),i.timelinePreloader=e.find(".ts-horizontal-timeline-preloader"),i.timelineBullets=e.find(".ts-horizontal-timeline-bullets"),i.timelineContent=e.children(".ts-horizontal-timeline-content"),i.timelineItems=e.find(".ts-horizontal-timeline-items"),0==i.timelineItems.find("li").length)return!1;i.timelineBullets.find("li").each(function(e){timelineConvertMoment=moment(jQuery(this).attr("data-original"),["MM/DD/YYYY","MM/DD/YYYY HH:mm"]),timelineConvertUNIX=1e3*timelineConvertMoment.unix(),jQuery(this).attr("data-timestamp",timelineConvertUNIX).attr("data-date",timelineConvertMoment.format("MM/DD/YYYY HH:mm")).find("a").attr("data-timestamp",timelineConvertUNIX)}),i.timelineContent.find("li").each(function(e){timelineConvertMoment=moment(jQuery(this).attr("data-original"),["MM/DD/YYYY","MM/DD/YYYY HH:mm"]),timelineConvertUNIX=1e3*timelineConvertMoment.unix(),jQuery(this).attr("data-timestamp",timelineConvertUNIX).attr("data-date",timelineConvertMoment.format("MM/DD/YYYY HH:mm"))}),i.timelineBullets.find("li.ts-horizontal-timeline-quick").sort(function(e,t){var i=parseInt(jQuery(e).attr("data-timestamp")),n=parseInt(jQuery(t).attr("data-timestamp"));return timelineReverse?i>n?-1:i<n?1:0:i<n?-1:i>n?1:0}).appendTo(i.timelineBullets),i.timelineItems.find("li.ts-horizontal-timeline-single").sort(function(e,t){var i=parseInt(jQuery(e).attr("data-timestamp")),n=parseInt(jQuery(t).attr("data-timestamp"));return timelineReverse?i>n?-1:i<n?1:0:i<n?-1:i>n?1:0}).appendTo(i.timelineItems),i.eventsWrapper=i.timelineWrapper.children(".ts-horizontal-timeline-events"),i.fillingLine=i.eventsWrapper.children(".ts-horizontal-timeline-filling"),i.timelineEvents=i.eventsWrapper.find("a"),i.timelineDates=v(i.timelineEvents),i.timelineSmallest=g(i.timelineDates,timelineReverse),i.timelineNavigation=e.find(".ts-horizontal-timeline-navigation"),i.timelineNextPrev=e.find(".ts-horizontal-timeline-nextprev"),i.timelineBullets.find("li").each(function(e){e==timelineStartEvent?(timelineStartEvent=jQuery(this).attr("data-timestamp"),jQuery(this).find("a").addClass("selected").removeClass("older-event")):(jQuery(this).find("a").removeClass("selected"),timelineIndexLooper<timelineStartEvent&&jQuery(this).find("a").addClass("older-event")),timelineIndexLooper++}),i.timelineContent.find("li").each(function(e){jQuery(this).attr("data-timestamp")==timelineStartEvent?jQuery(this).addClass("selected"):jQuery(this).removeClass("selected")});var r=e.width(),l=o(i,timelineTotalWidth,timelineMinDistance,timelineMaxDistance,timelineLeftDistance,timelineRightDistance,timelineEqualizer,timelineReverse);if(e.addClass("loaded"),i.timelineNavigation.on("click",".next",function(e){e.preventDefault(),jQuery(this).hasClass("inactive")||t(i,l,"next")}),i.timelineNavigation.on("click",".prev",function(e){e.preventDefault(),jQuery(this).hasClass("inactive")||t(i,l,"prev")}),i.timelineNextPrev.on("click",".next",function(e){e.preventDefault(),n(i,l,"next")}),i.timelineNextPrev.on("click",".prev",function(e){e.preventDefault(),n(i,l,"prev")}),i.eventsWrapper.on("click","a",function(e){e.preventDefault(),i.timelineEvents.removeClass("selected"),jQuery(this).addClass("selected"),f(jQuery(this)),s(jQuery(this),i.fillingLine,l),m(i,jQuery(this))}),"ontouchstart"in document.documentElement)if(1==$TS_VCSC_Hammer_ReleaseNew){var p=document.getElementById(i.timelineWrapper.attr("id"));(p=new Hammer(p,{prevent_default:!0})).on("swipeleft",function(e){return e.preventDefault(),t(i,l,"next"),!1}).on("swiperight",function(e){return e.preventDefault(),t(i,l,"prev"),!1});var h=document.getElementById(i.timelineContent.attr("id"));(h=new Hammer(h,{prevent_default:!0})).on("swipeleft",function(e){return e.preventDefault(),n(i,l,"next"),!1}).on("swiperight",function(e){return e.preventDefault(),n(i,l,"prev"),!1})}else(p=new Hammer(i.timelineWrapper)).on("swipeleft",function(e){return t(i,l,"next"),!1}).on("swiperight",function(e){return t(i,l,"prev"),!1}),(h=new Hammer(i.timelineContent)).on("swipeleft",function(e){return n(i,l,"next"),!1}).on("swiperight",function(e){return n(i,l,"prev"),!1});timelineKeyboard&&jQuery(document).keyup(function(t){"37"==t.which&&C(e.get(0))?n(i,l,"prev"):"39"==t.which&&C(e.get(0))&&n(i,l,"next")}),a(i),i.timelinePreloader.hide(),jQuery(window).on("debouncedresize",function(t){c(i.eventsWrapper.get(0),"translateX","0px"),r=e.width(),(l=o(i,timelineTotalWidth,timelineMinDistance,timelineMaxDistance,timelineLeftDistance,timelineRightDistance,timelineEqualizer,timelineReverse))<=r?(i.timelineNavigation.hide(),i.timelineWrapper.addClass("ts-horizontal-timeline-allbullets")):(i.timelineNavigation.show(),i.timelineWrapper.removeClass("ts-horizontal-timeline-allbullets")),u(i),d(i),setTimeout(function(){r=e.width(),l=o(i,timelineTotalWidth,timelineMinDistance,timelineMaxDistance,timelineLeftDistance,timelineRightDistance,timelineEqualizer,timelineReverse),s(i.eventsWrapper.find("a.selected"),i.fillingLine,timelineTotalWidth)},250)})})}(y)});